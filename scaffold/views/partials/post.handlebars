{{! Partial for a single post }}
<div id={{id}} class="post">
    <div class="post-avatar">
        <!-- the user's avatar -->
    </div>
    <div class="post-content preserve-newlines">
        <!-- the post -->
        <h2>{{title}}</h2>
        <p>{{content}}</p>
        <div class="post-status-bar">
            <span>
                {{#ifCond username user.username}}
                    <button onclick=handleDeleteClick({{id}})> Delete Button</button>
                {{else}}
                    <button onclick=handleLikeClick(({{id}}))> Like Button</button>
                {{/ifCond}}
                <p class = 'likes'>Likes: {{likes}}</p>
            </span>
            <!-- everything that is shown in the status bar -->
            <!-- Heart = â™¥ -->
            <!-- font awesome  trashcan = <i class="fas fa-trash-alt"> </i>-->
        </div>        
    </div>
</div>
<script>
    function handleLikeClick(postId) {
        fetch('/like/' + postId, {
            method: 'POST',
            headers: {
                
            },
            body: ""
            })
        .then(statusCheck)
        .then(processData)
        .catch(handleError);

        function statusCheck(res) {
            if (!res.ok) {
                throw new Error('Failed to fetch: ' + res.statusText);
            }
            return res.json();  // Assuming the server response is in JSON format
    }

    //`````````````````````````````````````````````````````````````````````````````
        function processData(data) {
            if (data.likes) {
                let post = document.getElementById(data.postId);
                let likesEle = post.querySelector('.likes');
                likesEle.textContent = 'Likes: ' + data.likes;
            } else {
                console.log("Something went wrong!");
            }
        }

        function handleError(error) {
            console.error('Error updating likes', error);
        }
    }




    function handleDeleteClick(postId) {
        /*
        const buttonElement = event.target.closest('.delete-button');
        const postId = buttonElement.getAttribute('data-id');        
        */
        fetch('/delete/' + postId, {
            method: 'POST',
            headers: {
                
            },
            body: ""
            })
        .then(statusCheck)
        .then(processData)
        .catch(handleError);
        // you might want to "fetch" something...        
        function statusCheck(res) {
            if (!res.ok) {
                throw new Error('Failed to fetch: ' + res.statusText);
            }
            return res.json();  // Assuming the server response is in JSON format
    }

    //`````````````````````````````````````````````````````````````````````````````
        function processData(data) {
            if (data.postId) {
                let post = document.getElementById(data.postId);
                post.remove();
            } else {
                console.log("Something went wrong!");
            }
        }

        function handleError(error) {
            console.error('Error removing post', error);
        }     
    }    
</script>